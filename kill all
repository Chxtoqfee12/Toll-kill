-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Debris = game:GetService("Debris")
local LocalPlayer = Players.LocalPlayer

-- Settings
local spamEnabled = false
local power = 10      -- ค่ากระเด็น/แรง Event
local lift = 5        -- ค่าลอยขึ้นช้า
local spamDelay = 0.5 -- เวลาหยุดระหว่างการ Spam

-- GUI
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
ScreenGui.Name = "Kill All"

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 240, 0, 140)
Frame.Position = UDim2.new(0.05,0,0.2,0)
Frame.BackgroundColor3 = Color3.fromRGB(40,40,40)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1,0,0,30)
Title.Text = "Kill All"
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(255,255,255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18

local ToggleButton = Instance.new("TextButton", Frame)
ToggleButton.Size = UDim2.new(0.9,0,0,30)
ToggleButton.Position = UDim2.new(0.05,0,0.3,0)
ToggleButton.Text = "Spam: OFF"
ToggleButton.BackgroundColor3 = Color3.fromRGB(200,50,50)
ToggleButton.TextColor3 = Color3.fromRGB(255,255,255)
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.TextSize = 16

-- Inputs
local function createInput(name,yPos,default,min,max,step,callback)
    local label = Instance.new("TextLabel",Frame)
    label.Size = UDim2.new(0.5,-5,0,25)
    label.Position = UDim2.new(0.05,0,yPos,0)
    label.Text = name
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(255,255,255)
    label.Font = Enum.Font.SourceSans
    label.TextSize = 14

    local box = Instance.new("TextBox",Frame)
    box.Size = UDim2.new(0.45,0,0,25)
    box.Position = UDim2.new(0.5,0,yPos,0)
    box.Text = tostring(default)
    box.BackgroundColor3 = Color3.fromRGB(70,70,70)
    box.TextColor3 = Color3.fromRGB(255,255,255)
    box.Font = Enum.Font.SourceSans
    box.TextSize = 14

    box.FocusLost:Connect(function()
        local val = tonumber(box.Text)
        if val then
            val = math.clamp(val,min,max)
            val = math.floor(val/step + 0.5)*step
            box.Text = tostring(val)
            callback(val)
        else
            box.Text = tostring(default)
        end
    end)
end


-- ฟังก์ชัน Spam
local function SpamTool()
    local char = LocalPlayer.Character
    if not char then return end

    local tool = char:FindFirstChildOfClass("Tool")
    if not tool then return end
    local event = tool:FindFirstChild("Event")
    if not event then return end

    for _, plr in pairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = plr.Character.HumanoidRootPart

            -- ลอยขึ้นช้า
            local bv = Instance.new("BodyVelocity")
            bv.Velocity = Vector3.new(0,lift,0)
            bv.MaxForce = Vector3.new(1e5,1e5,1e5)
            bv.P = 1000
            bv.Parent = hrp
            Debris:AddItem(bv,0.5)

            -- ยิง Event พร้อม Power
            event:FireServer("slash", plr.Character, hrp.Position, power)
        end
    end
end

-- Spam loop
local spamConnection
ToggleButton.MouseButton1Click:Connect(function()
    spamEnabled = not spamEnabled
    if spamEnabled then
        ToggleButton.Text = "Spam: ON"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(50,200,50)
        spamConnection = RunService.Heartbeat:Connect(function()
            if spamEnabled then
                SpamTool()
                task.wait(spamDelay)
            end
        end)
    else
        ToggleButton.Text = "Spam: OFF"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(200,50,50)
        if spamConnection then
            spamConnection:Disconnect()
            spamConnection = nil
        end
    end
end)
